<pre><code>

(function(){
    var show = false;
    var token;
  
    var menu = document.createElement(&quot;div&quot;);
    menu.style[&#039;width&#039;] = &quot;20%&quot;;
	menu.style[&#039;background-color&#039;] = &quot;#FFFFFF&quot;;
	menu.style[&#039;opacity&#039;] = 0.5;
	menu.style[&#039;color&#039;] = &quot;black&quot;;
	menu.style[&#039;float&#039;] = &quot;right&quot;;
	menu.style[&#039;padding&#039;] = &quot;20px&quot;;
    menu.style[&#039;pointer-events&#039;] = &quot;auto&quot;;
    menu.style.visibility =&quot;hidden&quot;;
    document.body.appendChild(menu);

    menu.innerHTML = &#039;&lt;b&gt;現在のトークン：&lt;b&gt;&lt;br&gt;&lt;input type=&quot;text&quot; value=&#039; + token + &#039; readonly=&quot;readonly&quot; id=&quot;token&quot; style=&quot;width:80%&quot;&gt; &lt;input type=&quot;button&quot; value=&quot;コピー&quot; id=&quot;copy&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;トークン書き換え&lt;b&gt;&lt;br&gt;&lt;input type=&quot;text&quot; id=&quot;tokenArea&quot; style=&quot;width:80%&quot;&gt;&lt;/input&gt; &lt;input type=&quot;button&quot; value=&quot;書き換え&quot; id=&quot;rewrite&quot;&gt;&#039;;
    var r = document.getElementById(&quot;rewrite&quot;);
    var c = document.getElementById(&quot;copy&quot;);
    var t = document.getElementById(&quot;token&quot;);

    function keyup(e){
        if(e.key == &quot;i&quot; &amp;&amp; !show){
            show = true;
            token = checkToken();
            menu.style.visibility = &quot;visible&quot;;
            t.value = token;

        }else if(e.key == &quot;i&quot; &amp;&amp; show){
            show = false;
            menu.style.visibility =&quot;hidden&quot;;
        }
    }
    function checkToken(){
        var t = {};
        t.t = window.zj[&quot;\x67\x65\x74&quot;](&quot;\x73\x74\x61\x72\x76\x65\x5f\x74\x6f\x6b\x65\x6e&quot;);
        t.id = window.zj[&quot;\x67\x65\x74&quot;](&quot;\x73\x74\x61\x72\x76\x65\x5f\x74\x6f\x6b\x65\x6e\x5f\x69\x64&quot;);
        return t.t + &quot; &quot; + t.id;
    }
    function setToken(token){
        var t = token.split(&quot; &quot;);
        window.zj[&quot;\x73\x65\x74&quot;](&quot;\x73\x74\x61\x72\x76\x65\x5f\x74\x6f\x6b\x65\x6e&quot;,t[0]);
        window.zj[&quot;\x73\x65\x74&quot;](&quot;\x73\x74\x61\x72\x76\x65\x5f\x74\x6f\x6b\x65\x6e\x5f\x69\x64&quot;,t[1]);
        window.location.href = &quot;https://starve.io/&quot;;
    }
    function rewritef(){
        if(window.confirm(&quot;トークンを書き換えてページを再読み込みします。&quot;)){
            var token = document.getElementById(&quot;tokenArea&quot;).value;
            setToken(token)
        }else{
            alert(&quot;キャンセルしました&quot;);
        }
        
    }
    function execCopy(){
        var string = token;
        var tmp = document.createElement(&quot;div&quot;);
        var pre = document.createElement(&#039;pre&#039;);
      
        pre.style.webkitUserSelect = &#039;auto&#039;;
        pre.style.userSelect = &#039;auto&#039;;
      
        tmp.appendChild(pre).textContent = string;
      
        var s = tmp.style;
        s.position = &#039;fixed&#039;;
        s.right = &#039;200%&#039;;
      
        document.body.appendChild(tmp);
        document.getSelection().selectAllChildren(tmp);
      
        var result = document.execCommand(&quot;copy&quot;);
      
        document.body.removeChild(tmp);
        return result;
      }

    function init(){
        window.addEventListener(&quot;keyup&quot;,keyup);

        r.addEventListener(&quot;click&quot;,rewritef);
        c.addEventListener(&quot;click&quot;,function(){
            execCopy(token);
        })
    }
    init();
})();

</code></pre>
